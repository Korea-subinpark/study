# Node.js
## 특징
* 서버
    * 서버 애플리케이션을 실행하는데 가장 많이 사용된다
* 런타임
    * JavaScript를 브라우저가 아닌 컴퓨터에서 실행할 수 있게 해준다
* 이벤트 기반
    * 이벤트가 발생하면 콜백 함수를 호출한다
    * 이벤트가 없거나 모두 처리된 상태면 다음 이벤트가 발생할 때까지 기다린다
    * 이벤트 loop
        * 이벤트 발생 시 호출할 콜백 함수들을 관리
        * 호출된 콜백 함수의 실행 순서 결정
        * 노드가 종료될 때까지 이벤트 처리 작업 반복
    * task 큐(콜백 큐)
        * 이벤트 발생 후 호출되어야 할 콜백 함수들이 저장된 큐
    * 백그라운드
        * 타이머, I/O 콜백 또는 이벤트 리스너들이 대기하는 곳
* 논블로킹 I/O
    * 오래 걸리는 함수를 백그라운드로 보내서 다음 코드가 먼저 실행되도록 한다
    * 백그라운드로 보내진 함수는 task 큐를 거쳐 다시 호출 스택으로 올라온다
    ```javascript
    function longRunningTask() {
        console.log('작업 끝');
    }
    console.log('시작');
    setTimeout(longRunningTask, 0);//오래 걸리는 작업을 백그라운드로 보낸다
    //실제로는 setTimeout보다 setImmediate을 많이 사용
    console.log('다음 작업');
    //결과
    //시작
    //다음 작업
    //작업 끝
    ```
* 싱글 스레드
    * 노드 프로세스에 여러 개의 스레드가 있지만 직접 제어할 수 있는 스레드는 하나이다
    * 장점: 스레드를 추가하거나 놀고 있는 스레드를 삭제하는 비용이 없다

## 노드 서버의 장단점
|장점|단점|
|---|---|
|멀티 스레드 방식에 비하여 자원을 적게 사용|CPU 코어를 하나밖에 사용하지 못함|
|libuv 라이브러리로 I/O 작업을 논블로킹으로 처리|싱글 스레드이기 때문에 에러 처리가 안되면 서버 전체가 멈춤|
|웹 서버가 내장|서버 규모가 커지면 관리가 어려움|
|JavaScript를 사용하기 때문에 JSON 형식을 다루기 쉬움|CPU 연산이 많으면 블로킹이 발생해 비효율적|
||이미지나 비디오 처리, 대규모 데이터 처리에는 부적합|
